var d=class{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}},R=class{static fromArray(t,r){let n=r||new x;for(let i=t.length-1;i>=0;--i)n=new $t(t[i],n);return n}[Symbol.iterator](){return new ri(this)}toArray(){return[...this]}atLeastLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return r!==void 0}hasLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return t===-1&&r instanceof x}countLength(){let t=this,r=0;for(;t;)t=t.tail,r++;return r-1}};function $(e,t){return new $t(e,t)}function c(e,t){return R.fromArray(e,t)}var ri=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof x)return{done:!0};{let{head:t,tail:r}=this.#e;return this.#e=r,{value:t,done:!1}}}},x=class extends R{},$t=class extends R{constructor(t,r){super(),this.head=t,this.tail=r}},It=class{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,r,n){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=r??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=n??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return xr(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;let r=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let i=0;i<r;i++)if(this.rawBuffer[i]!==t.rawBuffer[i])return!1;let n=this.bitSize%8;if(n){let i=8-n;if(this.rawBuffer[r]>>i!==t.rawBuffer[r]>>i)return!1}}else{for(let i=0;i<r;i++){let s=xr(this.rawBuffer,this.bitOffset,i),l=xr(t.rawBuffer,t.bitOffset,i);if(s!==l)return!1}let n=this.bitSize%8;if(n){let i=xr(this.rawBuffer,this.bitOffset,r),s=xr(t.rawBuffer,t.bitOffset,r),l=8-n;if(i>>l!==s>>l)return!1}}return!0}get buffer(){if(Ps("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(Ps("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}};function xr(e,t,r){if(t===0)return e[r]??0;{let n=e[r]<<t&255,i=e[r+1]>>8-t;return n|i}}var wr=class{constructor(t){this.value=t}},Is={};function Ps(e,t){Is[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),Is[e]=!0)}var Pt=class e extends d{static isResult(t){return t instanceof e}},_=class extends Pt{constructor(t){super(),this[0]=t}isOk(){return!0}},w=class extends Pt{constructor(t){super(),this[0]=t}isOk(){return!1}};function j(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!Ls(n)||!Ls(i)||!Au(n,i)||yu(n,i)||ku(n,i)||vu(n,i)||zu(n,i)||Su(n,i)||Eu(n,i))return!1;let l=Object.getPrototypeOf(n);if(l!==null&&typeof l.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[o,u]=gu(n);for(let a of o(n))r.push(u(n,a),u(i,a))}return!0}function gu(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function yu(e,t){return e instanceof Date&&(e>t||e<t)}function ku(e,t){return!(e instanceof It)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function vu(e,t){return Array.isArray(e)&&e.length!==t.length}function zu(e,t){return e instanceof Map&&e.size!==t.size}function Su(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function Eu(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function Ls(e){return typeof e=="object"&&e!==null}function Au(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function nt(e,t,r,n,i,s,l){let o=new globalThis.Error(s);o.gleam_error=e,o.file=t,o.module=r,o.line=n,o.function=i,o.fn=i;for(let u in l)o[u]=l[u];return o}var h=class extends d{constructor(t){super(),this[0]=t}},y=class extends d{};function ni(e,t){if(e instanceof h){let r=e[0];return new _(r)}else return new w(t)}function it(e){if(e instanceof _){let t=e[0];return new h(t)}else return new y}function Ge(e,t){return e instanceof h?e[0]:t}function qe(e,t){if(e instanceof h){let r=e[0];return new h(t(r))}else return new y}function ii(e,t){if(e instanceof h){let r=e[0];return t(r)}else return new y}var Us=new WeakMap,si=new DataView(new ArrayBuffer(8)),li=0;function oi(e){let t=Us.get(e);if(t!==void 0)return t;let r=li++;return li===2147483647&&(li=0),Us.set(e,r),r}function ui(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function ai(e){let t=0,r=e.length;for(let n=0;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function Fs(e){si.setFloat64(0,e);let t=si.getInt32(0),r=si.getInt32(4);return Math.imul(73244475,t>>16^t)^r}function ju(e){return ai(e.toString())}function qu(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let n=e.hashCode(e);if(typeof n=="number")return n}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return oi(e);if(e instanceof Date)return Fs(e.getTime());let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let n=0;n<e.length;n++)r=Math.imul(31,r)+_e(e[n])|0;else if(e instanceof Set)e.forEach(n=>{r=r+_e(n)|0});else if(e instanceof Map)e.forEach((n,i)=>{r=r+ui(_e(n),_e(i))|0});else{let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],l=e[s];r=r+ui(_e(l),ai(s))|0}}return r}function _e(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return Fs(e);case"string":return ai(e);case"bigint":return ju(e);case"object":return qu(e);case"symbol":return oi(e);case"function":return oi(e);default:return 0}}var Ce=5,fi=Math.pow(2,Ce),Tu=fi-1,Bu=fi/2,Cu=fi/4,ie=0,Be=1,ae=2,mt=3,pi={type:ae,bitmap:0,array:[]};function br(e,t){return e>>>t&Tu}function nn(e,t){return 1<<br(e,t)}function Ou(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function di(e,t){return Ou(e&t-1)}function $e(e,t,r){let n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=e[s];return i[t]=r,i}function Nu(e,t,r){let n=e.length,i=new Array(n+1),s=0,l=0;for(;s<t;)i[l++]=e[s++];for(i[l++]=r;s<n;)i[l++]=e[s++];return i}function ci(e,t){let r=e.length,n=new Array(r-1),i=0,s=0;for(;i<t;)n[s++]=e[i++];for(++i;i<r;)n[s++]=e[i++];return n}function Ms(e,t,r,n,i,s){let l=_e(t);if(l===n)return{type:mt,hash:l,array:[{type:ie,k:t,v:r},{type:ie,k:i,v:s}]};let o={val:!1};return gr(_i(pi,e,l,t,r,o),e,n,i,s,o)}function gr(e,t,r,n,i,s){switch(e.type){case Be:return Iu(e,t,r,n,i,s);case ae:return _i(e,t,r,n,i,s);case mt:return Pu(e,t,r,n,i,s)}}function Iu(e,t,r,n,i,s){let l=br(r,t),o=e.array[l];if(o===void 0)return s.val=!0,{type:Be,size:e.size+1,array:$e(e.array,l,{type:ie,k:n,v:i})};if(o.type===ie)return j(n,o.k)?i===o.v?e:{type:Be,size:e.size,array:$e(e.array,l,{type:ie,k:n,v:i})}:(s.val=!0,{type:Be,size:e.size,array:$e(e.array,l,Ms(t+Ce,o.k,o.v,r,n,i))});let u=gr(o,t+Ce,r,n,i,s);return u===o?e:{type:Be,size:e.size,array:$e(e.array,l,u)}}function _i(e,t,r,n,i,s){let l=nn(r,t),o=di(e.bitmap,l);if(e.bitmap&l){let u=e.array[o];if(u.type!==ie){let f=gr(u,t+Ce,r,n,i,s);return f===u?e:{type:ae,bitmap:e.bitmap,array:$e(e.array,o,f)}}let a=u.k;return j(n,a)?i===u.v?e:{type:ae,bitmap:e.bitmap,array:$e(e.array,o,{type:ie,k:n,v:i})}:(s.val=!0,{type:ae,bitmap:e.bitmap,array:$e(e.array,o,Ms(t+Ce,a,u.v,r,n,i))})}else{let u=e.array.length;if(u>=Bu){let a=new Array(32),f=br(r,t);a[f]=_i(pi,t+Ce,r,n,i,s);let p=0,m=e.bitmap;for(let b=0;b<32;b++){if(m&1){let g=e.array[p++];a[b]=g}m=m>>>1}return{type:Be,size:u+1,array:a}}else{let a=Nu(e.array,o,{type:ie,k:n,v:i});return s.val=!0,{type:ae,bitmap:e.bitmap|l,array:a}}}}function Pu(e,t,r,n,i,s){if(r===e.hash){let l=$i(e,n);if(l!==-1)return e.array[l].v===i?e:{type:mt,hash:r,array:$e(e.array,l,{type:ie,k:n,v:i})};let o=e.array.length;return s.val=!0,{type:mt,hash:r,array:$e(e.array,o,{type:ie,k:n,v:i})}}return gr({type:ae,bitmap:nn(e.hash,t),array:[e]},t,r,n,i,s)}function $i(e,t){let r=e.array.length;for(let n=0;n<r;n++)if(j(t,e.array[n].k))return n;return-1}function rn(e,t,r,n){switch(e.type){case Be:return Lu(e,t,r,n);case ae:return Uu(e,t,r,n);case mt:return Du(e,n)}}function Lu(e,t,r,n){let i=br(r,t),s=e.array[i];if(s!==void 0){if(s.type!==ie)return rn(s,t+Ce,r,n);if(j(n,s.k))return s}}function Uu(e,t,r,n){let i=nn(r,t);if(!(e.bitmap&i))return;let s=di(e.bitmap,i),l=e.array[s];if(l.type!==ie)return rn(l,t+Ce,r,n);if(j(n,l.k))return l}function Du(e,t){let r=$i(e,t);if(!(r<0))return e.array[r]}function mi(e,t,r,n){switch(e.type){case Be:return Fu(e,t,r,n);case ae:return Mu(e,t,r,n);case mt:return Wu(e,n)}}function Fu(e,t,r,n){let i=br(r,t),s=e.array[i];if(s===void 0)return e;let l;if(s.type===ie){if(!j(s.k,n))return e}else if(l=mi(s,t+Ce,r,n),l===s)return e;if(l===void 0){if(e.size<=Cu){let o=e.array,u=new Array(e.size-1),a=0,f=0,p=0;for(;a<i;){let m=o[a];m!==void 0&&(u[f]=m,p|=1<<a,++f),++a}for(++a;a<o.length;){let m=o[a];m!==void 0&&(u[f]=m,p|=1<<a,++f),++a}return{type:ae,bitmap:p,array:u}}return{type:Be,size:e.size-1,array:$e(e.array,i,l)}}return{type:Be,size:e.size,array:$e(e.array,i,l)}}function Mu(e,t,r,n){let i=nn(r,t);if(!(e.bitmap&i))return e;let s=di(e.bitmap,i),l=e.array[s];if(l.type!==ie){let o=mi(l,t+Ce,r,n);return o===l?e:o!==void 0?{type:ae,bitmap:e.bitmap,array:$e(e.array,s,o)}:e.bitmap===i?void 0:{type:ae,bitmap:e.bitmap^i,array:ci(e.array,s)}}return j(n,l.k)?e.bitmap===i?void 0:{type:ae,bitmap:e.bitmap^i,array:ci(e.array,s)}:e}function Wu(e,t){let r=$i(e,t);if(r<0)return e;if(e.array.length!==1)return{type:mt,hash:e.hash,array:ci(e.array,r)}}function Ws(e,t){if(e===void 0)return;let r=e.array,n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s!==void 0){if(s.type===ie){t(s.v,s.k);continue}Ws(s,t)}}}var me=class e{static fromObject(t){let r=Object.keys(t),n=e.new();for(let i=0;i<r.length;i++){let s=r[i];n=n.set(s,t[s])}return n}static fromMap(t){let r=e.new();return t.forEach((n,i)=>{r=r.set(i,n)}),r}static new(){return new e(void 0,0)}constructor(t,r){this.root=t,this.size=r}get(t,r){if(this.root===void 0)return r;let n=rn(this.root,0,_e(t),t);return n===void 0?r:n.v}set(t,r){let n={val:!1},i=this.root===void 0?pi:this.root,s=gr(i,0,_e(t),t,r,n);return s===this.root?this:new e(s,n.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let r=mi(this.root,0,_e(t),t);return r===this.root?this:r===void 0?e.new():new e(r,this.size-1)}has(t){return this.root===void 0?!1:rn(this.root,0,_e(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((r,n)=>t.push([n,r])),t}forEach(t){Ws(this.root,t)}hashCode(){let t=0;return this.forEach((r,n)=>{t=t+ui(_e(r),_e(n))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;try{return this.forEach((r,n)=>{if(!j(t.get(n,!r),r))throw Ds}),!0}catch(r){if(r===Ds)return!1;throw r}}},Ds=Symbol();var Z=class extends d{},J=class extends d{},st=class extends d{};function xi(e,t){return t>=2&&t<=36?Zs(e,t):new w(void 0)}function yr(){return Ut(c([]))}function xe(e,t){return ot(e,t)}function ln(e,t,r){let i=e,s=wi(i,t,r);return s}function on(e,t){return e+t}function Qu(e,t){for(;;){let r=e,n=t;if(r instanceof x)return n;{let i=r.head;e=r.tail,t=n+i}}}function un(e){return Qu(e,"")}function Ku(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof x)return s;{let l=n.head;e=n.tail,t=i,r=s+i+l}}}function se(e,t){if(e instanceof x)return"";{let r=e.head,n=e.tail;return Ku(n,t,r)}}function Dt(e){let r=yi(e);return Qs(r)}function zr(e,t){for(;;){let r=e,n=t;if(n>0){let s=an(r);if(s instanceof _)e=s[0][1],t=n-1;else return r}else return r}}function Sr(e,t){if(t==="")return vr(e);{let n=e,i=bi(n,t);return K(i,U)}}function gi(e){if(e>1114111)return new w(void 0);{let r=e;if(r>=55296&&r<=57343)return new w(void 0);if(e<0)return new w(void 0);{let i=e;return new _(Ks(i))}}}function Ve(e){let t=Xs(e);return t}var Ne=class extends d{constructor(t,r,n){super(),this.expected=t,this.found=r,this.path=n}},we=class extends d{constructor(t){super(),this.function=t}};function Ar(e,t){let r=t.function(e),n=r[0],i=r[1];return i instanceof x?new _(n):new w(i)}function pn(e){return new we(t=>[e,c([])])}function nl(e,t){return new we(r=>{let n=e.function(r),i=n[0],s=n[1];return[t(i),s]})}function nc(e,t,r){for(;;){let n=e,i=t,s=r;if(s instanceof x)return i;{let l=s.head,o=s.tail,u=l.function(n),a=u;if(u[1]instanceof x)return a;e=n,t=i,r=o}}}function ic(e,t){return new we(r=>{let n=e.function(r),i=n;return n[1]instanceof x?i:nc(r,i,t)})}function il(e,t){return c([new Ne(e,He(t),c([]))])}function sl(e,t,r){let n=r(e);return n instanceof _?[n[0],c([])]:[n[0],c([new Ne(t,He(e),c([]))])]}function sc(e){return j(!0,e)?[!0,c([])]:j(!1,e)?[!1,c([])]:[!1,il("Bool",e)]}function lc(e){return sl(e,"Int",al)}var ll=new we(sc),ki=new we(lc);function oc(e){return sl(e,"String",fl)}var P=new we(oc);function uc(e,t,r,n,i){let s=n(t),l=s[1];if(l instanceof x){let o=s[0],u=i(r),a=u[1];if(a instanceof x){let f=u[0];return[Ze(e[0],o,f),e[1]]}else{let f=a;return ht([ne(),f],c(["values"]))}}else{let o=l;return ht([ne(),o],c(["keys"]))}}function vi(e,t){return new we(r=>{let n=cl(r);if(n instanceof _){let i=n[0];return _n(i,[ne(),c([])],(s,l,o)=>s[1]instanceof x?uc(s,l,o,e.function,t.function):s)}else return[ne(),il("Dict",r)]})}function ol(e){return new we(t=>ul(t,e.function,(r,n)=>ht(r,c([n])),0,c([])))}function ht(e,t){let r=ic(P,c([nl(ki,oe)])),n=K(t,s=>{let l=s,o=Ar(l,r);return o instanceof _?o[0]:"<"+He(l)+">"}),i=K(e[1],s=>{let l=s;return new Ne(l.expected,l.found,jr(n,s.path))});return[e[0],i]}function cc(e,t,r,n,i){for(;;){let s=e,l=t,o=r,u=n,a=i;if(s instanceof x){let f=o(u);return ht(f,E(l))}else{let f=s.head,p=s.tail,m=Si(u,f);if(m instanceof _){let b=m[0];if(b instanceof h){let g=b[0];e=p,t=$(f,l),r=o,n=g,i=a}else return a(u,$(f,l))}else{let b=m[0],k=[o(u)[0],c([new Ne(b,He(u),c([]))])];return ht(k,E(l))}}}}function ac(e,t,r){return new we(n=>{let i=cc(e,c([]),t.function,n,(f,p)=>{let g=[t.function(f)[0],c([new Ne("Field","Nothing",c([]))])];return ht(g,E(p))}),s=i[0],l=i[1],o=r(s).function(n),u=o[0],a=o[1];return[u,jr(l,a)]})}function F(e,t,r){return ac(c([e]),t,r)}function dn(e,t,r,n){return new we(i=>{let s,l,o=Si(i,e);if(o instanceof _){let z=o[0];if(z instanceof h){let k=z[0];l=r.function(k)}else l=[t,c([])]}else{let z=o[0];l=[t,c([new Ne(z,He(i),c([]))])]}s=ht(l,c([e]));let a=s,f=a[0],p=a[1],m=n(f).function(i),b=m[0],g=m[1];return[b,jr(p,g)]})}var qr=void 0,pl={};function U(e){return e}function lt(e){return/^[-+]?(\d+)$/.test(e)?new _(parseInt(e)):new w(qr)}function oe(e){return e.toString()}var fc={2:/[^0-1]/,3:/[^0-2]/,4:/[^0-3]/,5:/[^0-4]/,6:/[^0-5]/,7:/[^0-6]/,8:/[^0-7]/,9:/[^0-8]/,10:/[^0-9]/,11:/[^0-9a]/,12:/[^0-9a-b]/,13:/[^0-9a-c]/,14:/[^0-9a-d]/,15:/[^0-9a-e]/,16:/[^0-9a-f]/,17:/[^0-9a-g]/,18:/[^0-9a-h]/,19:/[^0-9a-i]/,20:/[^0-9a-j]/,21:/[^0-9a-k]/,22:/[^0-9a-l]/,23:/[^0-9a-m]/,24:/[^0-9a-n]/,25:/[^0-9a-o]/,26:/[^0-9a-p]/,27:/[^0-9a-q]/,28:/[^0-9a-r]/,29:/[^0-9a-s]/,30:/[^0-9a-t]/,31:/[^0-9a-u]/,32:/[^0-9a-v]/,33:/[^0-9a-w]/,34:/[^0-9a-x]/,35:/[^0-9a-y]/,36:/[^0-9a-z]/};function Zs(e,t){if(fc[t].test(e.replace(/^-/,"").toLowerCase()))return new w(qr);let r=parseInt(e,t);return isNaN(r)?new w(qr):new _(r)}function wi(e,t,r){return e.replaceAll(t,r)}function cn(e){if(e==="")return 0;let t=Ai(e);if(t){let r=0;for(let n of t)r++;return r}else return e.match(/./gsu).length}function vr(e){let t=Ai(e);return t?R.fromArray(Array.from(t).map(r=>r.segment)):R.fromArray(e.match(/./gsu))}var dl;function Ai(e){if(globalThis.Intl&&Intl.Segmenter)return dl||=new Intl.Segmenter,dl.segment(e)[Symbol.iterator]()}function an(e){let t,r=Ai(e);return r?t=r.next().value?.segment:t=e.match(/./su)?.[0],t?new _([t,e.slice(t.length)]):new w(qr)}function xt(e){return[e.charCodeAt(0)|0,e.slice(1)]}function Ae(e){return e.toLowerCase()}function ot(e,t){return e+t}function bi(e,t){return R.fromArray(e.split(t))}function Ut(e){let t="";for(let r of e)t=t+r;return t}function X(e,t,r){return e.slice(t,t+r)}function Er(e,t){return e.startsWith(t)}var $l=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),pc=new RegExp(`^[${$l}]*`),dc=new RegExp(`[${$l}]*$`);function yi(e){return e.replace(pc,"")}function Qs(e){return e.replace(dc,"")}function Ks(e){return new wr(e)}function fn(e){return e.toArray().map(t=>String.fromCodePoint(t.value)).join("")}function ne(){return me.new()}function $n(e){return R.fromArray(e.entries())}function Ie(e,t){let r=e.get(t,pl);return r===pl?new w(qr):new _(r)}function ml(e,t,r){return r.set(e,t)}function He(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof Pt)return"Result";if(e instanceof R)return"List";if(e instanceof It)return"BitArray";if(e instanceof me)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return"Array";if(typeof e=="number")return"Float";if(e===null)return"Nil";if(e===void 0)return"Nil";{let t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function Xs(e){return new Ei().inspect(e)}function Hs(e){let t=e.toString().replace("+","");if(t.indexOf(".")>=0)return t;{let r=t.indexOf("e");return r>=0?t.slice(0,r)+".0"+t.slice(r):t+".0"}}var Ei=class{#e=new Set;inspect(t){let r=typeof t;if(t===!0)return"True";if(t===!1)return"False";if(t===null)return"//js(null)";if(t===void 0)return"Nil";if(r==="string")return this.#s(t);if(r==="bigint"||Number.isInteger(t))return t.toString();if(r==="number")return Hs(t);if(t instanceof wr)return this.#l(t);if(t instanceof It)return this.#o(t);if(t instanceof RegExp)return`//js(${t})`;if(t instanceof Date)return`//js(Date("${t.toISOString()}"))`;if(t instanceof globalThis.Error)return`//js(${t.toString()})`;if(t instanceof Function){let i=[];for(let s of Array(t.length).keys())i.push(String.fromCharCode(s+97));return`//fn(${i.join(", ")}) { ... }`}if(this.#e.size===this.#e.add(t).size)return"//js(circular reference)";let n;if(Array.isArray(t))n=`#(${t.map(i=>this.inspect(i)).join(", ")})`;else if(t instanceof R)n=this.#i(t);else if(t instanceof d)n=this.#n(t);else if(t instanceof me)n=this.#r(t);else{if(t instanceof Set)return`//js(Set(${[...t].map(i=>this.inspect(i)).join(", ")}))`;n=this.#t(t)}return this.#e.delete(t),n}#t(t){let r=Object.getPrototypeOf(t)?.constructor?.name||"Object",n=[];for(let l of Object.keys(t))n.push(`${this.inspect(l)}: ${this.inspect(t[l])}`);let i=n.length?" "+n.join(", ")+" ":"";return`//js(${r==="Object"?"":r+" "}{${i}})`}#r(t){let r="dict.from_list([",n=!0;return t.forEach((i,s)=>{n||(r=r+", "),r=r+"#("+this.inspect(s)+", "+this.inspect(i)+")",n=!1}),r+"])"}#n(t){let r=Object.keys(t).map(n=>{let i=this.inspect(t[n]);return isNaN(parseInt(n))?`${n}: ${i}`:i}).join(", ");return r?`${t.constructor.name}(${r})`:t.constructor.name}#i(t){if(t instanceof x)return"[]";let r='charlist.from_string("',n="[",i=t;for(;i instanceof $t;){let s=i.head;i=i.tail,n!=="["&&(n+=", "),n+=this.inspect(s),r&&(Number.isInteger(s)&&s>=32&&s<=126?r+=String.fromCharCode(s):r=null)}return r?r+'")':n+"]"}#s(t){let r='"';for(let n=0;n<t.length;n++){let i=t[n];switch(i){case`
`:r+="\\n";break;case"\r":r+="\\r";break;case"	":r+="\\t";break;case"\f":r+="\\f";break;case"\\":r+="\\\\";break;case'"':r+='\\"';break;default:i<" "||i>"~"&&i<"\xA0"?r+="\\u{"+i.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":r+=i}}return r+='"',r}#l(t){return`//utfcodepoint(${String.fromCodePoint(t.value)})`}#o(t){if(t.bitSize===0)return"<<>>";let r="<<";for(let n=0;n<t.byteSize-1;n++)r+=t.byteAt(n).toString(),r+=", ";if(t.byteSize*8===t.bitSize)r+=t.byteAt(t.byteSize-1).toString();else{let n=t.bitSize%8;r+=t.byteAt(t.byteSize-1)>>8-n,r+=`:size(${n})`}return r+=">>",r}};function Si(e,t){if(e instanceof me||e instanceof WeakMap||e instanceof Map){let n={},i=e.get(t,n);return i===n?new _(new y):new _(new h(i))}let r=Number.isInteger(t);if(r&&t>=0&&t<8&&e instanceof R){let n=0;for(let i of e){if(n===t)return new _(new h(i));n++}return new w("Indexable")}return r&&Array.isArray(e)||e&&typeof e=="object"||e&&Object.getPrototypeOf(e)===Object.prototype?t in e?new _(new h(e[t])):new _(new y):new w(r?"Indexable":"Dict")}function ul(e,t,r,n,i){if(!(e instanceof R||Array.isArray(e))){let l=new Ne("List",He(e),i);return[i,R.fromArray([l])]}let s=[];for(let l of e){let o=t(l),[u,a]=o;if(a instanceof $t){let[f,p]=r(o,n.toString());return[i,p]}s.push(u),n++}return[R.fromArray(s),i]}function cl(e){if(e instanceof me)return new _(e);if(e instanceof Map||e instanceof WeakMap)return new _(me.fromMap(e));if(e==null)return new w("Dict");if(typeof e!="object")return new w("Dict");let t=Object.getPrototypeOf(e);return t===Object.prototype||t===null?new _(me.fromObject(e)):new w("Dict")}function al(e){return Number.isInteger(e)?new _(e):new w(0)}function fl(e){return typeof e=="string"?new _(e):new w("")}function _c(e,t){return!j(Ie(t,e),new w(void 0))}function ji(e,t){return _c(t,e)}function Ze(e,t,r){return ml(t,r,e)}function $c(e,t){for(;;){let r=e,n=t;if(r instanceof x)return n;{let i=r.tail,s=r.head[0],l=r.head[1];e=i,t=Ze(n,s,l)}}}function sn(e){return $c(e,ne())}function mc(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof x)return i;{let l=n.tail,o=n.head[0],u=n.head[1];e=l,t=s(i,o,u),r=s}}}function _n(e,t,r){return mc($n(e),t,r)}var ut=class extends d{constructor(t){super(),this[0]=t}},Je=class extends d{constructor(t){super(),this[0]=t}},Y=class extends d{},wt=class extends d{};function bt(e,t){for(;;){let r=e,n=t;if(r instanceof x)return n;{let i=r.head;e=r.tail,t=$(i,n)}}}function E(e){return bt(e,c([]))}function xc(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof x)return E(s);{let l=n.head,o=n.tail,u;i(l)?u=$(l,s):u=s;let f=u;e=o,t=i,r=f}}}function Tr(e,t){return xc(e,t,c([]))}function wc(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof x)return E(s);{let l=n.head,o=n.tail,u,a=i(l);if(a instanceof _){let p=a[0];u=$(p,s)}else u=s;let f=u;e=o,t=i,r=f}}}function Pe(e,t){return wc(e,t,c([]))}function bc(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof x)return E(s);{let l=n.head;e=n.tail,t=i,r=$(i(l),s)}}}function K(e,t){return bc(e,t,c([]))}function gc(e,t){for(;;){let r=e,n=t;if(r instanceof x)return n;{let i=r.head;e=r.tail,t=$(i,n)}}}function jr(e,t){return gc(E(e),t)}function qi(e,t){return $(t,e)}function yc(e,t){for(;;){let r=e,n=t;if(r instanceof x)return E(n);{let i=r.head;e=r.tail,t=bt(i,n)}}}function Ti(e){return yc(e,c([]))}function gt(e,t){return Ti(K(e,t))}function Ye(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof x)return i;{let l=n.head;e=n.tail,t=s(i,l),r=s}}}function mn(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof x)return i;{let l=n.head,o=n.tail,u=s(i,l);if(u instanceof ut){let a=u[0];e=o,t=a,r=s}else return u[0]}}}function kc(e,t,r,n,i,s){for(;;){let l=e,o=t,u=r,a=n,f=i,p=s,m=$(f,u);if(l instanceof x)return a instanceof Y?$(E(m),p):$(m,p);{let b=l.head,g=l.tail,z=o(f,b);if(a instanceof Y)if(z instanceof Z)e=g,t=o,r=m,n=a,i=b,s=p;else if(z instanceof J)e=g,t=o,r=m,n=a,i=b,s=p;else{let k;a instanceof Y?k=$(E(m),p):k=$(m,p);let q=k;if(g instanceof x)return $(c([b]),q);{let V=g.head,re=g.tail,L,T=o(b,V);T instanceof Z?L=new Y:T instanceof J?L=new Y:L=new wt;let Ee=L;e=re,t=o,r=c([b]),n=Ee,i=V,s=q}}else if(z instanceof Z){let k;a instanceof Y?k=$(E(m),p):k=$(m,p);let q=k;if(g instanceof x)return $(c([b]),q);{let V=g.head,re=g.tail,L,T=o(b,V);T instanceof Z?L=new Y:T instanceof J?L=new Y:L=new wt;let Ee=L;e=re,t=o,r=c([b]),n=Ee,i=V,s=q}}else if(z instanceof J){let k;a instanceof Y?k=$(E(m),p):k=$(m,p);let q=k;if(g instanceof x)return $(c([b]),q);{let V=g.head,re=g.tail,L,T=o(b,V);T instanceof Z?L=new Y:T instanceof J?L=new Y:L=new wt;let Ee=L;e=re,t=o,r=c([b]),n=Ee,i=V,s=q}}else e=g,t=o,r=m,n=a,i=b,s=p}}}function vc(e,t,r,n){for(;;){let i=e,s=t,l=r,o=n;if(i instanceof x)return bt(s,o);if(s instanceof x)return bt(i,o);{let u=i.head,a=i.tail,f=s.head,p=s.tail,m=l(u,f);m instanceof Z?(e=a,t=s,r=l,n=$(u,o)):m instanceof J?(e=i,t=p,r=l,n=$(f,o)):(e=i,t=p,r=l,n=$(f,o))}}}function zc(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof x)return E(s);{let l=n.tail;if(l instanceof x){let o=n.head;return E($(E(o),s))}else{let o=n.head,u=l.head,a=l.tail,f=vc(o,u,i,c([]));e=a,t=i,r=$(f,s)}}}}function Sc(e,t,r,n){for(;;){let i=e,s=t,l=r,o=n;if(i instanceof x)return bt(s,o);if(s instanceof x)return bt(i,o);{let u=i.head,a=i.tail,f=s.head,p=s.tail,m=l(u,f);m instanceof Z?(e=i,t=p,r=l,n=$(f,o)):m instanceof J?(e=a,t=s,r=l,n=$(u,o)):(e=a,t=s,r=l,n=$(u,o))}}}function Ec(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof x)return E(s);{let l=n.tail;if(l instanceof x){let o=n.head;return E($(E(o),s))}else{let o=n.head,u=l.head,a=l.tail,f=Sc(o,u,i,c([]));e=a,t=i,r=$(f,s)}}}}function Ac(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof x)return c([]);if(i instanceof Y){if(n.tail instanceof x)return n.head;e=zc(n,s,c([])),t=new wt,r=s}else if(n.tail instanceof x){let o=n.head;return E(o)}else e=Ec(n,s,c([])),t=new Y,r=s}}function xl(e,t){if(e instanceof x)return c([]);{let r=e.tail;if(r instanceof x){let n=e.head;return c([n])}else{let n=e.head,i=r.head,s=r.tail,l,o=t(n,i);o instanceof Z?l=new Y:o instanceof J?l=new Y:l=new wt;let u=l,a=kc(s,t,c([n]),u,i,c([]));return Ac(a,new Y,t)}}}function jc(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof x)return new w(void 0);{let l=n.head[0];if(j(l,i)){let o=n.tail,u=n.head[1];return new _([u,bt(s,o)])}else{let o=n.head;e=n.tail,t=i,r=$(o,s)}}}}function Bi(e,t){return jc(e,t,c([]))}function wl(e){return e instanceof _}function Qe(e,t){if(e instanceof _){let r=e[0];return new _(t(r))}else{let r=e[0];return new w(r)}}function Ft(e,t){if(e instanceof _){let r=e[0];return new _(r)}else{let r=e[0];return new w(t(r))}}function v(e,t){if(e instanceof _){let r=e[0];return t(r)}else{let r=e[0];return new w(r)}}function ct(e,t){return e instanceof _?e[0]:t}function yt(e,t){if(e instanceof _){let r=e[0];return new _(r)}else return new w(t)}var A=class extends d{constructor(t,r,n,i,s,l,o){super(),this.scheme=t,this.userinfo=r,this.host=n,this.port=i,this.path=s,this.query=l,this.fragment=o}};function Bc(e){return 48>=e&&e<=57||65>=e&&e<=90||97>=e&&e<=122||e===58||e===46}function Ue(e,t){return new _((()=>{let r=t;return new A(r.scheme,r.userinfo,r.host,r.port,r.path,r.query,new h(e))})())}function Cc(e,t,r,n){for(;;){let i=e,s=t,l=r,o=n;if(s.startsWith("#"))if(o===0){let u=s.slice(1);return Ue(u,l)}else{let u=s.slice(1),a=X(i,0,o),f,p=l;return f=new A(p.scheme,p.userinfo,p.host,p.port,p.path,new h(a),p.fragment),Ue(u,f)}else{if(s==="")return new _((()=>{let u=l;return new A(u.scheme,u.userinfo,u.host,u.port,u.path,new h(i),u.fragment)})());{let a=xt(s)[1];e=i,t=a,r=l,n=o+1}}}}function at(e,t){return Cc(e,e,t,0)}function Oc(e,t,r,n){for(;;){let i=e,s=t,l=r,o=n;if(s.startsWith("?")){let u=s.slice(1),a=X(i,0,o),f,p=l;return f=new A(p.scheme,p.userinfo,p.host,p.port,a,p.query,p.fragment),at(u,f)}else if(s.startsWith("#")){let u=s.slice(1),a=X(i,0,o),f,p=l;return f=new A(p.scheme,p.userinfo,p.host,p.port,a,p.query,p.fragment),Ue(u,f)}else{if(s==="")return new _((()=>{let u=l;return new A(u.scheme,u.userinfo,u.host,u.port,i,u.query,u.fragment)})());{let a=xt(s)[1];e=i,t=a,r=l,n=o+1}}}}function Wt(e,t){return Oc(e,e,t,0)}function Le(e,t,r){for(;;){let n=e,i=t,s=r;if(n.startsWith("0"))e=n.slice(1),t=i,r=s*10;else if(n.startsWith("1"))e=n.slice(1),t=i,r=s*10+1;else if(n.startsWith("2"))e=n.slice(1),t=i,r=s*10+2;else if(n.startsWith("3"))e=n.slice(1),t=i,r=s*10+3;else if(n.startsWith("4"))e=n.slice(1),t=i,r=s*10+4;else if(n.startsWith("5"))e=n.slice(1),t=i,r=s*10+5;else if(n.startsWith("6"))e=n.slice(1),t=i,r=s*10+6;else if(n.startsWith("7"))e=n.slice(1),t=i,r=s*10+7;else if(n.startsWith("8"))e=n.slice(1),t=i,r=s*10+8;else if(n.startsWith("9"))e=n.slice(1),t=i,r=s*10+9;else if(n.startsWith("?")){let l=n.slice(1),o,u=i;return o=new A(u.scheme,u.userinfo,u.host,new h(s),u.path,u.query,u.fragment),at(l,o)}else if(n.startsWith("#")){let l=n.slice(1),o,u=i;return o=new A(u.scheme,u.userinfo,u.host,new h(s),u.path,u.query,u.fragment),Ue(l,o)}else if(n.startsWith("/")){let l,o=i;return l=new A(o.scheme,o.userinfo,o.host,new h(s),o.path,o.query,o.fragment),Wt(n,l)}else return n===""?new _((()=>{let l=i;return new A(l.scheme,l.userinfo,l.host,new h(s),l.path,l.query,l.fragment)})()):new w(void 0)}}function hn(e,t){if(e.startsWith(":0")){let r=e.slice(2);return Le(r,t,0)}else if(e.startsWith(":1")){let r=e.slice(2);return Le(r,t,1)}else if(e.startsWith(":2")){let r=e.slice(2);return Le(r,t,2)}else if(e.startsWith(":3")){let r=e.slice(2);return Le(r,t,3)}else if(e.startsWith(":4")){let r=e.slice(2);return Le(r,t,4)}else if(e.startsWith(":5")){let r=e.slice(2);return Le(r,t,5)}else if(e.startsWith(":6")){let r=e.slice(2);return Le(r,t,6)}else if(e.startsWith(":7")){let r=e.slice(2);return Le(r,t,7)}else if(e.startsWith(":8")){let r=e.slice(2);return Le(r,t,8)}else if(e.startsWith(":9")){let r=e.slice(2);return Le(r,t,9)}else{if(e.startsWith(":"))return new w(void 0);if(e.startsWith("?")){let r=e.slice(1);return at(r,t)}else if(e.startsWith("#")){let r=e.slice(1);return Ue(r,t)}else return e.startsWith("/")?Wt(e,t):e===""?new _(t):new w(void 0)}}function bl(e,t,r,n){for(;;){let i=e,s=t,l=r,o=n;if(s==="")return new _((()=>{let u=l;return new A(u.scheme,u.userinfo,new h(i),u.port,u.path,u.query,u.fragment)})());if(s.startsWith(":")){let u=X(i,0,o),a,f=l;return a=new A(f.scheme,f.userinfo,new h(u),f.port,f.path,f.query,f.fragment),hn(s,a)}else if(s.startsWith("/")){let u=X(i,0,o),a,f=l;return a=new A(f.scheme,f.userinfo,new h(u),f.port,f.path,f.query,f.fragment),Wt(s,a)}else if(s.startsWith("?")){let u=s.slice(1),a=X(i,0,o),f,p=l;return f=new A(p.scheme,p.userinfo,new h(a),p.port,p.path,p.query,p.fragment),at(u,f)}else if(s.startsWith("#")){let u=s.slice(1),a=X(i,0,o),f,p=l;return f=new A(p.scheme,p.userinfo,new h(a),p.port,p.path,p.query,p.fragment),Ue(u,f)}else{let a=xt(s)[1];e=i,t=a,r=l,n=o+1}}}function Nc(e,t,r,n){for(;;){let i=e,s=t,l=r,o=n;if(s==="")return new _((()=>{let u=l;return new A(u.scheme,u.userinfo,new h(s),u.port,u.path,u.query,u.fragment)})());if(s.startsWith("]"))if(o===0){let u=s.slice(1);return hn(u,l)}else{let u=s.slice(1),a=X(i,0,o+1),f,p=l;return f=new A(p.scheme,p.userinfo,new h(a),p.port,p.path,p.query,p.fragment),hn(u,f)}else if(s.startsWith("/")){if(o===0)return Wt(s,l);{let u=X(i,0,o),a,f=l;return a=new A(f.scheme,f.userinfo,new h(u),f.port,f.path,f.query,f.fragment),Wt(s,a)}}else if(s.startsWith("?"))if(o===0){let u=s.slice(1);return at(u,l)}else{let u=s.slice(1),a=X(i,0,o),f,p=l;return f=new A(p.scheme,p.userinfo,new h(a),p.port,p.path,p.query,p.fragment),at(u,f)}else if(s.startsWith("#"))if(o===0){let u=s.slice(1);return Ue(u,l)}else{let u=s.slice(1),a=X(i,0,o),f,p=l;return f=new A(p.scheme,p.userinfo,new h(a),p.port,p.path,p.query,p.fragment),Ue(u,f)}else{let u=xt(s),a=u[0],f=u[1];if(Bc(a))e=i,t=f,r=l,n=o+1;else return bl(i,i,l,0)}}}function Ic(e,t){return Nc(e,e,t,0)}function Pc(e,t){return bl(e,e,t,0)}function Mt(e,t){if(e.startsWith("["))return Ic(e,t);if(e.startsWith(":")){let r,n=t;return r=new A(n.scheme,n.userinfo,new h(""),n.port,n.path,n.query,n.fragment),hn(e,r)}else return e===""?new _((()=>{let r=t;return new A(r.scheme,r.userinfo,new h(""),r.port,r.path,r.query,r.fragment)})()):Pc(e,t)}function Lc(e,t,r,n){for(;;){let i=e,s=t,l=r,o=n;if(s.startsWith("@"))if(o===0){let u=s.slice(1);return Mt(u,l)}else{let u=s.slice(1),a=X(i,0,o),f,p=l;return f=new A(p.scheme,new h(a),p.host,p.port,p.path,p.query,p.fragment),Mt(u,f)}else{if(s==="")return Mt(i,l);if(s.startsWith("/"))return Mt(i,l);if(s.startsWith("?"))return Mt(i,l);if(s.startsWith("#"))return Mt(i,l);{let a=xt(s)[1];e=i,t=a,r=l,n=o+1}}}}function Uc(e,t){return Lc(e,e,t,0)}function Ci(e,t){if(e==="//")return new _((()=>{let r=t;return new A(r.scheme,r.userinfo,new h(""),r.port,r.path,r.query,r.fragment)})());if(e.startsWith("//")){let r=e.slice(2);return Uc(r,t)}else return Wt(e,t)}function Dc(e,t,r,n){for(;;){let i=e,s=t,l=r,o=n;if(s.startsWith("/")){if(o===0)return Ci(s,l);{let u=X(i,0,o),a,f=l;return a=new A(new h(Ae(u)),f.userinfo,f.host,f.port,f.path,f.query,f.fragment),Ci(s,a)}}else if(s.startsWith("?"))if(o===0){let u=s.slice(1);return at(u,l)}else{let u=s.slice(1),a=X(i,0,o),f,p=l;return f=new A(new h(Ae(a)),p.userinfo,p.host,p.port,p.path,p.query,p.fragment),at(u,f)}else if(s.startsWith("#"))if(o===0){let u=s.slice(1);return Ue(u,l)}else{let u=s.slice(1),a=X(i,0,o),f,p=l;return f=new A(new h(Ae(a)),p.userinfo,p.host,p.port,p.path,p.query,p.fragment),Ue(u,f)}else if(s.startsWith(":")){if(o===0)return new w(void 0);{let u=s.slice(1),a=X(i,0,o),f,p=l;return f=new A(new h(Ae(a)),p.userinfo,p.host,p.port,p.path,p.query,p.fragment),Ci(u,f)}}else{if(s==="")return new _((()=>{let u=l;return new A(u.scheme,u.userinfo,u.host,u.port,i,u.query,u.fragment)})());{let a=xt(s)[1];e=i,t=a,r=l,n=o+1}}}}function gl(e){let t,r=e.fragment;if(r instanceof h){let T=r[0];t=c(["#",T])}else t=c([]);let n=t,i,s=e.query;if(s instanceof h){let T=s[0];i=$("?",$(T,n))}else i=n;let l=i,o=$(e.path,l),u,a=e.host;Er(e.path,"/")?u=o:a instanceof h&&a[0]!==""?u=$("/",o):u=o;let p=u,m,b=e.host,g=e.port;if(g instanceof h)if(b instanceof h){let T=g[0];m=$(":",$(oe(T),p))}else m=p;else m=p;let z=m,k,q=e.scheme,V=e.userinfo,re=e.host;if(re instanceof h)if(V instanceof h)if(q instanceof h){let T=re[0],Ee=V[0],ti=q[0];k=$(ti,$("://",$(Ee,$("@",$(T,z)))))}else k=z;else if(q instanceof h){let T=re[0],Ee=q[0];k=$(Ee,$("://",$(T,z)))}else{let T=re[0];k=$("//",$(T,z))}else if(V instanceof h)if(q instanceof h){let T=q[0];k=$(T,$(":",z))}else k=z;else if(q instanceof h){let T=q[0];k=$(T,$(":",z))}else k=z;return un(k)}var Fc=new A(new y,new y,new y,new y,"",new y,new y);function yl(e){return Dc(e,e,Fc,0)}var Br=class extends d{},Oi=class extends d{},Ni=class extends d{},Ii=class extends d{},Pi=class extends d{},Li=class extends d{},Ui=class extends d{},Di=class extends d{},Fi=class extends d{};var xn=class extends d{},Cr=class extends d{};function vl(e){return e instanceof Br?"GET":e instanceof Oi?"POST":e instanceof Ni?"HEAD":e instanceof Ii?"PUT":e instanceof Pi?"DELETE":e instanceof Li?"TRACE":e instanceof Ui?"CONNECT":e instanceof Di?"OPTIONS":e instanceof Fi?"PATCH":e[0]}function zl(e){return e instanceof xn?"http":"https"}function Sl(e){let t=Ae(e);return t==="http"?new _(new xn):t==="https"?new _(new Cr):new w(void 0)}var Mi=class extends d{constructor(t,r,n,i,s,l,o,u){super(),this.method=t,this.headers=r,this.body=n,this.scheme=i,this.host=s,this.port=l,this.path=o,this.query=u}};function jl(e){return new A(new h(zl(e.scheme)),new y,new h(e.host),e.port,e.path,e.query,new y)}function Hc(e){return v((()=>{let t=e.scheme,r=Ge(t,"");return Sl(r)})(),t=>v((()=>{let r=e.host;return ni(r,void 0)})(),r=>{let n=new Mi(new Br,c([]),"",t,r,e.port,e.path,e.query);return new _(n)}))}function ql(e){let r=yl(e);return v(r,Hc)}var wn=class extends d{constructor(t,r,n){super(),this.status=t,this.headers=r,this.body=n}};var Rt=class e{constructor(t){this.promise=t}static wrap(t){return t instanceof Promise?new e(t):t}static unwrap(t){return t instanceof e?t.promise:t}};function fe(e){return Promise.resolve(Rt.wrap(e))}function bn(e,t){return e.then(r=>t(Rt.unwrap(r)))}function Gt(e,t){return e.then(r=>Rt.wrap(t(Rt.unwrap(r))))}function Wi(e){return new Promise(t=>{globalThis.setTimeout(t,e)})}function gn(...e){return e.length===1?Promise.race(e[0]):Promise.race(e)}function Tl(e,t){return Gt(e,n=>(t(n),n))}function Bl(e,t){return bn(e,n=>{if(n instanceof _){let i=n[0];return t(i)}else{let i=n[0];return fe(new w(i))}})}async function Cl(e){try{return new _(await fetch(e))}catch(t){return new w(new yn(t.toString()))}}function Ol(e){return new wn(e.status,R.fromArray([...e.headers]),e)}function Yc(e){let t=gl(jl(e)),r=vl(e.method).toUpperCase(),n={headers:Qc(e.headers),method:r};return[t,n]}function Nl(e){let[t,r]=Yc(e);return r.method!=="GET"&&r.method!=="HEAD"&&(r.body=e.body),new globalThis.Request(t,r)}function Qc(e){let t=new globalThis.Headers;for(let[r,n]of e)t.append(r.toLowerCase(),n);return t}async function Gi(e){let t;try{t=await e.body.text()}catch{return new w(new kn)}return new _(e.withFields({body:t}))}var yn=class extends d{constructor(t){super(),this[0]=t}},kn=class extends d{};function Il(e){let r=Nl(e),n=Cl(r);return Bl(n,i=>fe(new _(Ol(i))))}var vn=()=>[],ft=e=>[e];var Ht=(e,t)=>[...e,t];var ee=(e,t)=>t[e-1];var le=e=>e.length;var zn=(e,t)=>e<<t,Hi=(e,t)=>e>>t;function la(e,t,r,n,i){for(;;){let s=e,l=t,o=r,u=n,a=i;if(o<=u)e=s,t=a(l,ee(o,s)),r=o+1,n=u,i=a;else return l}}function Dl(e,t,r){let n=le(e);return la(e,t,2,n,r)}var kt=class extends d{constructor(t,r){super(),this.size=t,this.children=r}},Vt=class extends d{constructor(t,r){super(),this.sizes=t,this.children=r}},En=class extends d{constructor(t){super(),this.children=t}};function An(e){return new En(e)}function Or(e){if(e instanceof kt)return e.size;if(e instanceof Vt){let t=e.sizes;return ee(le(t),t)}else{let t=e.children;return le(t)}}function oa(e){let t=Or(ee(1,e));return Dl(e,ft(t),(r,n)=>{let i=ee(le(r),r)+Or(n);return Ht(r,i)})}function ua(e,t,r){for(;;){let n=e,i=t,s=r;if(ee(i,n)>s)return i-1;e=n,t=i+1,r=s}}function Fl(e,t){let r=le(t),n=ee(r,t),s=zn(1,e)*(r-1)+Or(n);return new kt(s,t)}function jn(e,t){let r=le(t),n=zn(1,e),i=oa(t),s;if(r===1?s=0:s=ee(r-1,i),s===n*(r-1)){let u=ee(r,i);return new kt(u,t)}else return new Vt(i,t)}var vt=5;function Ml(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof kt){let l=n.children,o=Hi(s,i),u=s-zn(o,i);e=ee(o+1,l),t=i-vt,r=u}else if(n instanceof Vt){let l=n.sizes,o=n.children,u=Hi(s,i),a=ua(l,u+1,s),f;a===0?f=s:f=s-ee(a,l);let p=f;e=ee(a+1,o),t=i-vt,r=p}else{let l=n.children;return ee(s+1,l)}}}var Vi=32;var Nr=class extends d{constructor(t,r,n,i){super(),this.nodes=t,this.items=r,this.push_node=n,this.push_item=i}};function Rl(e,t,r){if(e instanceof x)return c([ft(t)]);{let n=e.head,i=e.tail;if(le(n)<Vi)return $(Ht(n,t),i);{let l=r+vt,o=Fl(l,n);return $(ft(t),Rl(i,o,l))}}}function Gl(){return new Nr(c([]),vn(),Rl,Ht)}function Hl(e,t){let r=e.nodes,n=e.items,i=e.push_node,s=e.push_item;if(le(n)===Vi){let o=An(n);return new Nr(i(r,o,0),ft(t),i,s)}else return new Nr(r,s(n,t),i,s)}function ca(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof x)return new w(void 0);{let l=n.tail;if(l instanceof x){let o=n.head;return new _([s,o])}else{let o=n.head,u=l,a=s+vt;e=i(u,jn(a,o),a),t=i,r=a}}}}function Vl(e){let t=e.nodes,r=e.items,n=e.push_node,i=le(r),s;return i>0?s=n(t,An(r),0):s=t,ca(s,n,0)}var Ir=class extends d{},qn=class extends d{constructor(t,r){super(),this.shift=t,this.root=r}};function pa(e,t){let r=le(t);if(r===0)return new Ir;if(r===1)return new qn(e,ee(1,t));{let n=e+vt;return new qn(n,jn(n,t))}}function Zl(e){let t=(()=>{let n=Ye(e,Gl(),Hl);return Vl(n)})();if(t instanceof _){let r=t[0][0],n=t[0][1];return pa(r,n)}else return new Ir}function Jl(e,t){if(e instanceof Ir)return new w(void 0);{let r=e.shift,n=e.root;return 0<=t&&t<Or(n)?new _(Ml(n,r,t)):new w(void 0)}}function Yl(e,t){return e.lastIndex=0,e.test(t)}function Ql(e,t){try{let r="gu";return t.case_insensitive&&(r+="i"),t.multi_line&&(r+="m"),new _(new RegExp(e,r))}catch(r){let n=(r.columnNumber||0)|0;return new w(new Tn(r.message,n))}}var Tn=class extends d{constructor(t,r){super(),this.error=t,this.byte_index=r}},Zi=class extends d{constructor(t,r){super(),this.case_insensitive=t,this.multi_line=r}};function _a(e,t){return Ql(e,t)}function Pr(e){return _a(e,new Zi(!1,!1))}function Lr(e,t){return Yl(e,t)}var Bn=class extends d{constructor(t){super(),this.dict=t}};function ge(){return new Bn(ne())}function Kl(e,t){let r=e.dict,n=Ie(r,t);return wl(n)}var ma=void 0;function Xl(e){let t=Ye(e,ne(),(r,n)=>Ze(r,n,ma));return new Bn(t)}var Cn="src/nibble/lexer.gleam",Ke=class extends d{constructor(t){super(),this.run=t}},ue=class extends d{constructor(t,r){super(),this[0]=t,this[1]=r}},pe=class extends d{},ye=class extends d{constructor(t){super(),this[0]=t}},ke=class extends d{},On=class extends d{constructor(t,r,n){super(),this.span=t,this.lexeme=r,this.value=n}},Zt=class extends d{constructor(t,r,n,i){super(),this.row_start=t,this.col_start=r,this.row_end=n,this.col_end=i}},Nn=class extends d{constructor(t,r,n){super(),this.row=t,this.col=r,this.lexeme=n}},Ji=class extends d{constructor(t){super(),this.matchers=t}},zt=class extends d{constructor(t,r,n,i,s){super(),this.source=t,this.tokens=r,this.current=n,this.row=i,this.col=s}};function ro(e){return new Ji(t=>e(t))}function Ur(e,t){return new Ke((r,n,i)=>{let s=e.run(r,n,i);if(s instanceof ue){let l=s[0],o=s[1];return new ue(t(l),o)}else{if(s instanceof pe)return new pe;if(s instanceof ye){let l=s[0];return new ye(l)}else return new ke}})}function M(e,t){return new Ke((r,n,i)=>{let s=e.run(r,n,i);if(s instanceof ue){let l=s[0],o=s[1];return new ue(l,t(o))}else{if(s instanceof pe)return new pe;if(s instanceof ye){let l=s[0];return new ye(t(l))}else return new ke}})}function Xe(e){return new Ke((t,r,n)=>{let i=e.run(t,r,n);if(i instanceof ue){let s=i[1];return new ye(s)}else{if(i instanceof pe)return new pe;if(i instanceof ye){let s=i[0];return new ye(s)}else return new ke}})}function C(e,t){return new Ke((r,n,i)=>n===e?new ue(t,r):new ke)}function no(e,t,r){let n=Pr(t);if(!(n instanceof _))throw nt("let_assert",Cn,"nibble/lexer",334,"keyword","Pattern match failed, no pattern matched the value.",{value:n,start:11137,end:11187,pattern_start:11148,pattern_end:11157});let i=n[0];return new Ke((s,l,o)=>l===e&&(o===""||Lr(i,o))?new ue(r,s):new ke)}function ve(e,t,r,n){let i=Pr("^"+e+t+"*$");if(!(i instanceof _))throw nt("let_assert",Cn,"nibble/lexer",486,"identifier","Pattern match failed, no pattern matched the value.",{value:i,start:14767,end:14839,pattern_start:14778,pattern_end:14787});let s=i[0],l=Pr(t);if(!(l instanceof _))throw nt("let_assert",Cn,"nibble/lexer",487,"identifier","Pattern match failed, no pattern matched the value.",{value:l,start:14842,end:14890,pattern_start:14853,pattern_end:14862});let o=l[0];return new Ke((u,a,f)=>{let p=Lr(o,f);return Lr(s,a)?p?new pe:Kl(r,a)?new ke:new ue(n(a),u):new ke})}function Dr(e){let t=Pr("^\\s+$");if(!(t instanceof _))throw nt("let_assert",Cn,"nibble/lexer",557,"whitespace","Pattern match failed, no pattern matched the value.",{value:t,start:16378,end:16434,pattern_start:16389,pattern_end:16403});let r=t[0];return new Ke((n,i,s)=>Lr(r,i)?new ue(e,n):new ke)}function to(e,t,r,n){return mn(n,new ke,(i,s)=>{let l=s.run(e,t,r);if(l instanceof ue){let o=l;return new Je(o)}else{if(l instanceof pe)return new Je(new pe);if(l instanceof ye){let o=l;return new Je(o)}else return new ut(new ke)}})}function ha(e,t){return t===`
`?1:e+1}function xa(e,t){return t===`
`?e+1:e}function wa(e,t,r){for(;;){let n=e,i=t,s=r,l=n.matchers(i),o=s.source,u=s.current;if(o instanceof x){let a=u[2];if(a==="")return new _(E(s.tokens));{let f=u[0],p=u[1],m=a,b=to(i,m,"",l);if(b instanceof ue){let g=b[0],z=new Zt(f,p,s.row,s.col),k=new On(z,m,g);return new _(E($(k,s.tokens)))}else return b instanceof pe?new w(new Nn(f,p,m)):b instanceof ye?new _(E(s.tokens)):new w(new Nn(f,p,m))}}else{let a=u[0],f=u[1],p=u[2],m=o.head,b=o.tail,g=xa(s.row,m),z=ha(s.col,m),k=to(i,p,m,l);if(k instanceof ue){let q=k[0],V=k[1],re=new Zt(a,f,s.row,s.col),L=new On(re,p,q);e=n,t=V,r=new zt(b,$(L,s.tokens),[s.row,s.col,m],g,z)}else if(k instanceof pe)e=n,t=i,r=new zt(b,s.tokens,[a,f,p+m],g,z);else if(k instanceof ye){let q=k[0];e=n,t=q,r=new zt(b,s.tokens,[s.row,s.col,m],g,z)}else e=n,t=i,r=new zt(b,s.tokens,[a,f,p+m],g,z)}}}function io(e,t,r){return wa(r,t,new zt(vr(e),c([]),[1,1,""],1,1))}var je=class extends d{constructor(t){super(),this[0]=t}},W=class extends d{constructor(t,r,n){super(),this[0]=t,this[1]=r,this[2]=n}},ze=class extends d{constructor(t,r){super(),this[0]=t,this[1]=r}},In=class extends d{constructor(t,r,n,i){super(),this.src=t,this.idx=r,this.pos=n,this.ctx=i}},G=class extends d{constructor(t){super(),this[0]=t}},St=class extends d{constructor(t){super(),this[0]=t}},Jt=class extends d{constructor(t){super(),this[0]=t}},Pn=class extends d{constructor(t){super(),this[0]=t}},Mr=class extends d{constructor(t){super(),this[0]=t}},Yt=class extends d{},Qt=class extends d{constructor(t,r){super(),this[0]=t,this.got=r}};var Yi=class extends d{constructor(t,r,n){super(),this.pos=t,this.problem=r,this.context=n}},Kt=class extends d{},Ln=class extends d{constructor(t,r){super(),this[0]=t,this[1]=r}},Qi=class extends d{constructor(t,r){super(),this[0]=t,this[1]=r}};function Et(e,t){let r=t[0];return r(e)}function Un(e){let t=Jl(e.src,e.idx);if(t instanceof _){let r=t[0].span,n=t[0].value;return[new h(n),(()=>{let i=e;return new In(i.src,e.idx+1,r,i.ctx)})()]}else return[new y,e]}function N(e){return new je(t=>new W(new G(!1),e,t))}function Fr(e,t){let r=e[0],n=t[0];return new G(r||n)}function S(e,t){return new je(r=>{let n=Et(r,e);if(n instanceof W){let i=n[0],s=n[1],l=n[2],o=Et(l,t(s));if(o instanceof W){let u=o[0],a=o[1],f=o[2];return new W(Fr(i,u),a,f)}else{let u=o[0],a=o[1];return new ze(Fr(i,u),a)}}else{let i=n[0],s=n[1];return new ze(i,s)}})}function so(e,t){return S(e,t)}function Ki(e,t){return S(e,r=>N(t(r)))}function Rr(e,t){return Ki(e,r=>t)}function ga(e,t,r,n){for(;;){let i=e,s=t,u=Et(n,i(r));if(u instanceof W){let a=u[1];if(a instanceof St){let f=u[0],p=u[2],m=a[0];e=i,t=Fr(s,f),r=m,n=p}else{let f=u[0],p=u[2],m=a[0];return new W(Fr(s,f),m,p)}}else{let a=u[0],f=u[1];return new ze(Fr(s,a),f)}}}function Dn(e,t){return new je(r=>ga(t,new G(!1),e,r))}function Xt(e){return new je(t=>{let r=Un(t),n=r[0],i=r[1],s=qe(n,e);if(s instanceof h)if(s[0])if(n instanceof h){let o=n[0];return Et(i,S(Xt(e),u=>N($(o,u))))}else return new W(new G(!1),c([]),t);else return n instanceof h?new W(new G(!1),c([]),t):new W(new G(!1),c([]),t);else return new W(new G(!1),c([]),t)})}function Fn(e){return new je(t=>{let r=Un(t),n=r[0],i=r[1],s=ii(n,e);if(n instanceof h)if(s instanceof h){let l=s[0];return Et(i,(()=>{let o=Fn(e);return Ki(o,u=>qi(u,l))})())}else return new W(new G(!0),c([]),t);else return new W(new G(!0),c([]),t)})}function Wr(e,t){return new Ln(new Kt,new Yi(e.pos,t,e.ctx))}function ya(e){return new je(t=>{let r=new Mr(e),n=Wr(t,r);return new ze(new G(!1),n)})}function er(e){return ya(e)}function Q(e){return new je(t=>{let r=Un(t),n=r[0];if(n instanceof h){let i=n[0];if(j(e,i)){let s=r[1];return new W(new G(!0),void 0,s)}else{let s=r[1],l=n[0];return new ze(new G(!1),Wr(s,new Qt(Ve(e),l)))}}else{let i=r[1];return new ze(new G(!1),Wr(i,new Yt))}})}function tr(e,t){return new je(r=>{let n=Un(r),i=n[0],s=n[1],l=ii(i,t);if(i instanceof h)if(l instanceof h){let o=l[0];return new W(new G(!1),o,s)}else{let o=i[0];return new ze(new G(!1),Wr(s,new Qt(e,o)))}else return new ze(new G(!1),Wr(s,new Yt))})}function lo(e,t){for(;;){let r=e,n=t;if(r instanceof Kt)return n;if(r instanceof Ln){let i=r[0];if(i instanceof Kt){let s=r[1];return $(s,n)}else{let s=i,l=r[1];e=s,t=$(l,n)}}else{let i=r[0],s=r[1];e=i,t=lo(s,n)}}}function oo(e,t){let r=new In(Zl(e),0,new Zt(1,1,1,1),c([])),n=Et(r,t);if(n instanceof W){let i=n[1];return new _(i)}else{let i=n[1];return new w(lo(i,c([])))}}function ka(e,t){if(e instanceof W){let r=e[0],n=e[1],i=e[2];return new W(r,n,i)}else{let r=e[0],n=e[1];return new ze(r,new Qi(t,n))}}function At(e){return new je(t=>{let r=new ze(new G(!1),new Kt);return mn(e,r,(n,i)=>{if(n instanceof W)return new Je(n);if(n[0][0])return new Je(n);{let l=n[1],o=Et(t,i),u=ka(o,l);return new ut(u)}})})}function Gr(e){return At(c([Ki(e,t=>new h(t)),N(new y)]))}var rr=class extends d{constructor(t){super(),this.name=t}},pt=class extends d{},nr=class extends d{},ir=class extends d{constructor(t){super(),this.name=t}},I=class extends d{constructor(t){super(),this[0]=t}},qt=class extends d{},sr=class extends d{},lr=class extends d{},de=class extends d{constructor(t){super(),this.quote=t}},or=class extends d{},ur=class extends d{},Tt=class extends d{},cr=class extends d{constructor(t){super(),this.name=t}},ar=class extends d{constructor(t){super(),this.code=t}},fr=class extends d{constructor(t){super(),this.code=t}},pr=class extends d{},dr=class extends d{},Vr=class extends d{},Mn=class extends d{},Wn=class extends d{},De=class extends d{},Rn=class extends d{},jt=class extends d{constructor(t,r){super(),this.quote=t,this.parent=r}},Gn=class extends d{},Hr=class extends d{constructor(t){super(),this.parent=t}},Xi=class extends d{};function es(e){return e instanceof rr?"<"+e.name:e instanceof pt?">":e instanceof nr?"/>":e instanceof ir?"</"+e.name:e instanceof I?e[0]:e instanceof qt?"=":e instanceof sr?"<!--":e instanceof lr?"-->":e instanceof de?e.quote:e instanceof or?"<![CDATA[":e instanceof ur?"]]>":e instanceof Tt?"&":e instanceof cr?e.name:e instanceof ar?"#"+e.code:e instanceof fr?"#x"+e.code:e instanceof pr?";":e instanceof dr?"<?xml":"?>"}function co(e){return ve(e+"[a-zA-Z:_]","[a-zA-Z0-9:_\\-\\.]",ge(),t=>zr(t,cn(e)))}function va(){return ro(e=>{if(e instanceof Mn)return c([C("=",new qt),(()=>{let t=C("/>",new nr);return M(t,r=>new De)})(),(()=>{let t=C(">",new pt);return M(t,r=>new De)})(),(()=>{let t=C("'",new de("'"));return M(t,r=>new jt("'",r))})(),(()=>{let t=C('"',new de('"'));return M(t,r=>new jt('"',r))})(),(()=>{let t=ao();return Ur(t,r=>new I(r))})(),(()=>{let t=C(`
`,void 0);return Xe(t)})(),(()=>{let t=C("\r",void 0);return Xe(t)})(),(()=>{let t=Dr(void 0);return Xe(t)})()]);if(e instanceof Wn)return c([(()=>{let t=C(">",new pt);return M(t,r=>new De)})(),(()=>{let t=C(`
`,void 0);return Xe(t)})(),(()=>{let t=Dr(void 0);return Xe(t)})()]);if(e instanceof De)return c([(()=>{let t=C("<!--",new sr);return M(t,r=>new Rn)})(),(()=>{let t=C("<![CDATA[",new or);return M(t,r=>new Gn)})(),(()=>{let t=co("</"),r=Ur(t,n=>new ir(n));return M(r,n=>new Wn)})(),(()=>{let t=co("<"),r=Ur(t,n=>new rr(n));return M(r,n=>new Mn)})(),(()=>{let t=C("<?xml",new dr);return M(t,r=>new Xi)})(),ve("[\\r]?[\\n]","[\\s]",ge(),t=>new I(" ")),Dr(new I(" ")),ve("[^<&]","[^<&\\n]",ge(),t=>new I(t)),(()=>{let t=C("&",new Tt);return M(t,r=>new Hr(r))})()]);if(e instanceof Rn)return c([(()=>{let t=C("-->",new lr);return M(t,r=>new De)})(),ve("[^\\-]","[^\\-]",ge(),t=>new I(t)),no("-","[^-]",new I("-"))]);if(e instanceof jt){let t=e.quote,r=e.parent;return c([ve("[^<&"+t+"]","[^<&"+t+"]",ge(),n=>new I(n)),(()=>{let n=C(t,new de(t));return M(n,i=>r)})(),(()=>{let n=C("&",new Tt);return M(n,i=>new Hr(i))})()])}else{if(e instanceof Gn)return c([(()=>{let t=C("]]>",new ur);return M(t,r=>new De)})(),ve("[^\\]]","[^\\]]",ge(),t=>new I(t)),ve("\\]","[\\]>]",Xl(c(["]]>"])),t=>new I(t))]);if(e instanceof Hr){let t=e.parent;return c([ve("#x[a-fA-F0-9]","[a-fA-F0-9]",ge(),r=>new fr(zr(r,2))),ve("#[0-9]","[0-9]",ge(),r=>new ar(zr(r,1))),ve("[a-zA-Z_:]","[a-zA-Z_:0-9.\\-]",ge(),r=>new cr(r)),(()=>{let r=C(";",new pr);return M(r,n=>t)})()])}else return c([C("=",new qt),(()=>{let t=C("?>",new Vr);return M(t,r=>new De)})(),(()=>{let t=C("'",new de("'"));return M(t,r=>new jt("'",r))})(),(()=>{let t=C('"',new de('"'));return M(t,r=>new jt('"',r))})(),(()=>{let t=ao();return Ur(t,r=>new I(r))})(),(()=>{let t=C(`
`,void 0);return Xe(t)})(),(()=>{let t=C("\r",void 0);return Xe(t)})(),(()=>{let t=Dr(void 0);return Xe(t)})()])}})}function ao(){return ve("[a-zA-Z:_]","[a-zA-Z0-9:_\\-\\.]",ge(),e=>e)}function fo(e){return io(e,new De,va())}var Hn=class extends d{constructor(t,r,n,i){super(),this.version=t,this.encoding=r,this.standalone=n,this.root_element=i}},Fe=class extends d{constructor(t,r,n){super(),this.name=t,this.attrs=r,this.children=n}},_r=class extends d{constructor(t){super(),this.content=t}},Vn=class extends d{constructor(t){super(),this.content=t}};function za(){return tr("an opening tag",e=>{if(e instanceof rr){let t=e.name;return new h(t)}else return new y})}function Sa(){return tr("text content",e=>{if(e instanceof I){let t=e[0];return new h(t)}else return new y})}function Ea(){return S(Q(new Tt),e=>S(tr("a reference",t=>{if(t instanceof cr){let r=t.name;if(r==="amp")return new h("&");if(r==="quot")return new h('"');if(r==="apos")return new h("'");if(r==="lt")return new h("<");if(r==="gt")return new h(">");{let n=r;return new h("&"+n+";")}}else if(t instanceof ar){let n=t.code,i=xi(n,10),s=v(i,gi),l=Qe(s,o=>{let u=fn(c([o]));return new h(u)});return ct(l,new y)}else if(t instanceof fr){let n=t.code,i=xi(n,16),s=v(i,gi),l=Qe(s,o=>{let u=fn(c([o]));return new h(u)});return ct(l,new y)}else return new y}),t=>S(Q(new pr),r=>N(t))))}function Aa(){let e=Dn(c([]),t=>S(Gr(At(c([Sa(),Ea()]))),r=>{if(r instanceof h){let n=r[0],i=new St($(n,t));return N(i)}else{if(t instanceof x)return er("No text");{let n=new Jt(E(t));return N(n)}}}));return so(e,t=>{let r;r=se(t,"");let i=r;return N(new _r(i))})}function ja(){return S(Q(new nr),e=>N(c([])))}function qa(){return tr("an attribute name",e=>{if(e instanceof I){let t=e[0];return new h(t)}else return new y})}function Ta(){return S(At(c([(()=>{let e=Q(new de("'"));return Rr(e,"'")})(),(()=>{let e=Q(new de('"'));return Rr(e,'"')})()])),e=>S(tr("an attribute value",t=>{if(t instanceof I){let r=t[0];return new h(r)}else return new y}),t=>S(At(c([(()=>{let r=Q(new de("'"));return Rr(r,"'")})(),(()=>{let r=Q(new de('"'));return Rr(r,'"')})()])),r=>e===r?N(t):er("Expected "+e+", got "+r))))}function Ba(){return S(qa(),e=>S(Q(new qt),t=>S(Ta(),r=>N([e,r]))))}function _o(){return Dn(ne(),e=>S(Gr(Ba()),t=>{if(t instanceof h){let r=t[0];if(ji(e,r[0]))return er("Duplicate attribute name: "+r[0]);{let i=new St(Ze(e,r[0],r[1]));return N(i)}}else{let r=new Jt(e);return N(r)}}))}function Ca(e){return S(Xt(t=>j(t,new I(" "))),t=>S(Q(new ir(e)),r=>S(Q(new pt),n=>N(void 0))))}function Oa(){return S(Q(new sr),e=>S(Fn(t=>{if(t instanceof I){let r=t[0];return new h(r)}else return new y}),t=>S(Q(new lr),r=>N(new Vn(se(t,""))))))}function Na(){return S(Q(new or),e=>S(Fn(t=>{if(t instanceof I){let r=t[0];return new h(r)}else return new y}),t=>S(Q(new ur),r=>N(new _r(se(t,""))))))}function ts(e,t){let r=Bi(e,t);if(r instanceof _){let n=r[0][0],i=r[0][1];return[new h(n),i]}else return[new y,e]}function Ia(){return S(Q(new dr),e=>S(_o(),t=>S(Q(new Vr),r=>{let n=$n(t),i=ts(n,"version"),s=i[0],l=i[1],o=ts(l,"encoding"),u=o[0],a=o[1],f=ts(a,"standalone"),p=f[0],m=f[1];if(s instanceof h)if(m instanceof x){let b=s[0];return N([b,u,qe(p,z=>z==="yes")])}else{let b=m.head;return er("Incorrect attribute: "+b[0])}else return er("Version is required")})))}function Pa(){return Dn(c([]),e=>S(Gr(At(c([$o(),Aa(),Oa(),Na()]))),t=>{if(t instanceof h){let r=t[0],n=new St($(r,e));return N(n)}else{let r=new Jt(E(e));return N(r)}}))}function $o(){return S(za(),e=>S(_o(),t=>S(At(c([La(e),ja()])),r=>N(new Fe(e,t,r)))))}function La(e){return S(Q(new pt),t=>S(Pa(),r=>S(Ca(e),n=>N(r))))}function Ua(){return S(Xt(e=>j(e,new I(" "))),e=>S(Gr(Ia()),t=>S(Xt(r=>j(r,new I(" "))),r=>S($o(),n=>S(Xt(i=>j(i,new I(" "))),i=>{if(t instanceof h){let s=t[0][0],l=t[0][1],o=t[0][2];return N(new Hn(s,Ge(l,"UTF-8"),Ge(o,!0),n))}else return N(new Hn("1.0","UTF-8",!0,n))})))))}function mo(e){return oo(e,Ua())}function Fa(e){let t=e.row,r=e.col,n=e.lexeme;return"Lexer error at row "+oe(t)+", column "+oe(r)+": No match found for '"+n+"'"}function Ma(e){if(e instanceof Pn)return"Bad parser: "+e[0];if(e instanceof Mr)return e[0];if(e instanceof Yt)return"Unexpected end of input";if(e instanceof Qt){let t=e[0],r=e.got;return"Expected "+t+", got "+es(r)}else{let t=e[0];return"Unexpected token: "+es(t)}}function Wa(e){let t=K(e,r=>"Parser error at position "+(()=>{let n=r.pos.row_start;return oe(n)})()+":"+(()=>{let n=r.pos.col_start;return oe(n)})()+": "+Ma(r.problem));return se(t,`
`)}function ho(e){return v((()=>{let t=fo(e);return Ft(t,Fa)})(),t=>v((()=>{let r=mo(t);return Ft(r,Wa)})(),r=>new _(r)))}function Ra(e,t){for(;;){let r=e,n=t;if(r instanceof x)return n;{let i=r.head;if(i==="*"){let s=r.tail,l;l=gt(n,a=>a instanceof Fe?a.children:c([]));let u=l;e=s,t=u}else{let s=i,l=r.tail,o;o=gt(n,f=>{if(f instanceof Fe){let m=f.children;return Pe(m,b=>b instanceof Fe?b.name===s?new _(b):new w(void 0):new w(void 0))}else return c([])});let a=o;e=l,t=a}}}}function Zr(e,t){if(e instanceof Fe){if(t instanceof x)return c([]);{let r=e.name,n=t.head;if(r===n){let i=t.tail;return Ra(i,c([e]))}else return c([])}}else return c([])}function dt(e,t){let r=Zr(e,t);if(r instanceof x)return new w("No node found at path "+se(t,"/"));{let n=r.head;return new _(n)}}function Bt(e,t){if(e instanceof Fe){let n=e.attrs,i=Ie(n,t);return yt(i,"No attribute with name "+t)}else return new w("Node is not an element")}function Ga(e){if(e instanceof Fe){let r=e.children;return Pe(r,n=>{if(n instanceof _r){let i=n.content;return new _(i)}else return new w(void 0)})}else return c([])}function $r(e){let t=Ga(e);return Tr(t,r=>Dt(r)!=="")}var rs=class extends d{constructor(t,r){super(),this.version=t,this.channel=r}},ns=class extends d{constructor(t,r,n,i,s,l,o,u,a,f,p,m,b,g,z,k,q,V,re,L){super(),this.title=t,this.link=r,this.description=n,this.language=i,this.copyright=s,this.managing_editor=l,this.web_master=o,this.pub_date=u,this.last_build_date=a,this.category=f,this.generator=p,this.docs=m,this.cloud=b,this.ttl=g,this.image=z,this.rating=k,this.text_input=q,this.skip_hours=V,this.skip_days=re,this.items=L}},is=class extends d{constructor(t,r,n,i,s){super(),this.domain=t,this.port=r,this.path=n,this.register_procedure=i,this.protocol=s}},ss=class extends d{constructor(t,r,n,i,s,l){super(),this.url=t,this.title=r,this.link=n,this.width=i,this.height=s,this.description=l}},ls=class extends d{constructor(t,r,n,i){super(),this.title=t,this.description=r,this.name=n,this.link=i}},Zn=class extends d{constructor(t,r,n,i,s,l,o,u,a,f){super(),this.title=t,this.link=r,this.description=n,this.author=i,this.category=s,this.comments=l,this.enclosure=o,this.guid=u,this.pub_date=a,this.source=f}};function Va(e){return v(Bt(e,"domain"),t=>v(Bt(e,"port"),r=>v(Bt(e,"path"),n=>v(Bt(e,"registerProcedure"),i=>v(Bt(e,"protocol"),s=>v((()=>{let l=lt(r);return yt(l,"Invalid port number")})(),l=>new _(new is(t,l,n,i,s))))))))}function Za(e){let t=$r(e),r=se(t,""),n=lt(r);return yt(n,"Invalid TTL value")}function Se(e,t){let r=dt(e,t),n=Qe(r,$r);return Qe(n,i=>se(i," "))}function Ja(e){return v(Se(e,c(["textInput","title"])),t=>v(Se(e,c(["textInput","description"])),r=>v(Se(e,c(["textInput","name"])),n=>v(Se(e,c(["textInput","link"])),i=>new _(new ls(t,r,n,i))))))}function te(e,t){let r=dt(e,t),n=it(r),i=qe(n,$r);return qe(i,s=>se(s," "))}function Ya(e){return v(Se(e,c(["image","url"])),t=>v(Se(e,c(["image","title"])),r=>v(Se(e,c(["image","link"])),n=>{let i,s=Se(e,c(["image","width"])),l=yt(s,void 0),o=v(l,lt);i=it(o);let u=i,a,f=Se(e,c(["image","height"])),p=yt(f,void 0),m=v(p,lt);a=it(m);let b=a,g=te(e,c(["image","description"]));return new _(new ss(t,r,n,u,b,g))})))}function Qa(e){let t=te(e,c(["item","title"])),r=te(e,c(["item","link"])),n=te(e,c(["item","description"])),i=te(e,c(["item","author"])),s=c([]),l=te(e,c(["item","comments"])),o=new y,u=new y,a=te(e,c(["item","pubDate"])),f=new y;return n instanceof y?t instanceof y?new w("Item must have at least a title or description"):new _(new Zn(t,r,n,i,s,l,o,u,a,f)):new _(new Zn(t,r,n,i,s,l,o,u,a,f))}function Ka(e){return v(Se(e,c(["channel","title"])),t=>v(Se(e,c(["channel","link"])),r=>v(Se(e,c(["channel","description"])),n=>{let i=te(e,c(["channel","language"])),s=te(e,c(["channel","copyright"])),l=te(e,c(["channel","managingEditor"])),o=te(e,c(["channel","webMaster"])),u=te(e,c(["channel","pubDate"])),a=te(e,c(["channel","lastBuildDate"])),f=te(e,c(["channel","category"])),p=te(e,c(["channel","generator"])),m=te(e,c(["channel","docs"])),b,g=dt(e,c(["channel","cloud"])),z=v(g,Va);b=it(z);let k=b,q,V=dt(e,c(["channel","ttl"])),re=v(V,Za);q=it(re);let L=q,T,Ee=dt(e,c(["channel","image"])),ti=v(Ee,Ya);T=it(ti);let cu=T,au=te(e,c(["channel","rating"])),Bs,fu=dt(e,c(["channel","textInput"])),pu=v(fu,Ja);Bs=it(pu);let du=Bs,Cs,_u=Zr(e,c(["channel","skipHours","hour"])),$u=gt(_u,$r);Cs=Pe($u,lt);let mu=Cs,Os,hu=Zr(e,c(["channel","skipDays","day"]));Os=gt(hu,$r);let xu=Os,Ns,wu=Zr(e,c(["channel","item"]));Ns=Pe(wu,Qa);let bu=Ns;return new _(new ns(t,r,n,i,s,l,o,u,a,f,p,m,k,L,cu,au,du,mu,xu,bu))})))}function Xa(e){return v(dt(e.root_element,c(["rss","channel"])),t=>v(Bt(e.root_element,"version"),r=>v(Ka(t),n=>new _(new rs(r,n)))))}function xo(e){return v(ho(e),t=>v(Xa(t),r=>new _(r)))}function Me(e){return e}function wo(e){return e.replaceAll(/[><&"']/g,t=>{switch(t){case">":return"&gt;";case"<":return"&lt;";case"'":return"&#39;";case"&":return"&amp;";case'"':return"&quot;";default:return t}})}function bo(e){return wo(e)}function Jr(e){return bo(e)}var Vm=!!globalThis.HTMLElement?.prototype?.moveBefore;var We=c([]);var nf=new st,sf=new Z,lf=new J;function vo(e,t){return e.name===t.name?lf:e.name<t.name?sf:nf}var et=class extends d{constructor(t,r,n){super(),this.kind=t,this.name=r,this.value=n}};function ff(e,t){for(;;){let r=e,n=t;if(r instanceof x)return n;{let i=r.head;if(i instanceof et){let s=i.name;if(s==="")e=r.tail,t=n;else if(s==="class"){let l=i.value;if(l==="")e=r.tail,t=n;else{let o=r.tail;if(o instanceof x){let u=i;e=o,t=$(u,n)}else{let u=o.head;if(u instanceof et)if(u.name==="class"){let f=i.kind,p=l,m=o.tail,b=u.value,g=p+" "+b,z=new et(f,"class",g);e=$(z,m),t=n}else{let f=i;e=o,t=$(f,n)}else{let a=i;e=o,t=$(a,n)}}}}else if(s==="style"){let l=i.value;if(l==="")e=r.tail,t=n;else{let o=r.tail;if(o instanceof x){let u=i;e=o,t=$(u,n)}else{let u=o.head;if(u instanceof et)if(u.name==="style"){let f=i.kind,p=l,m=o.tail,b=u.value,g=p+";"+b,z=new et(f,"style",g);e=$(z,m),t=n}else{let f=i;e=o,t=$(f,n)}else{let a=i;e=o,t=$(a,n)}}}}else{let l=i;e=r.tail,t=$(l,n)}}else{let s=i;e=r.tail,t=$(s,n)}}}}function us(e){if(e instanceof x)return e;if(e.tail instanceof x)return e;{let n=xl(e,(i,s)=>vo(s,i));return ff(n,We)}}var pf=0;function Qn(e,t){return new et(pf,e,t)}function Qr(e,t,r){let n;e!==""?n=$(Qn("data-lustre-key",e),r):n=r;let s=n,l;return t!==""?l=$(Qn("xmlns",t),s):l=s,Ye(l,yr(),(a,f)=>{if(f instanceof et){let p=f.name;if(p==="virtual:defaultValue"){let m=f.value;return xe(a,' value="'+Jr(m)+'"')}else{if(p==="")return a;{let m=f.value;if(m==="")return xe(a," "+p);{let b=p,g=m;return xe(a," "+b+'="'+Jr(g)+'"')}}}}else return a})}function H(e,t){return Qn(e,t)}function ce(e){return H("class",e)}function So(e){return H("id",e)}function mr(e,t){return e===""||t===""?ce(""):H("style",e+":"+t+";")}function cs(e){return H("href",e)}function Eo(e){return H("rel",e)}function Ao(e){return H("src",e)}function jo(e){return H("crossorigin",e)}function qo(e){return H("action",e)}function To(e){return H("method",e)}function as(e){return H("name",e)}function Kn(e){return H("type",e)}function fs(e){return H("value",e)}function Bo(e){return H("content",e)}function Co(e){return H("charset",e)}function hr(){return null}function Xn(e,t,r){return e??=new Map,e.set(t,r),e}var Ct=class extends d{constructor(t,r,n,i,s){super(),this.kind=t,this.key=r,this.mapper=n,this.children=i,this.keyed_children=s}},tt=class extends d{constructor(t,r,n,i,s,l,o,u,a,f){super(),this.kind=t,this.key=r,this.mapper=n,this.namespace=i,this.tag=s,this.attributes=l,this.children=o,this.keyed_children=u,this.self_closing=a,this.void=f}},_t=class extends d{constructor(t,r,n,i){super(),this.kind=t,this.key=r,this.mapper=n,this.content=i}},Kr=class extends d{constructor(t,r,n,i,s,l,o){super(),this.kind=t,this.key=r,this.mapper=n,this.namespace=i,this.tag=s,this.attributes=l,this.inner_html=o}};function hf(e,t){return t===""?e==="area"||e==="base"||e==="br"||e==="col"||e==="embed"||e==="hr"||e==="img"||e==="input"||e==="link"||e==="meta"||e==="param"||e==="source"||e==="track"?!0:e==="wbr":!1}function Io(e,t){if(t instanceof Ct){let r=t;return new Ct(r.kind,e,r.mapper,r.children,r.keyed_children)}else if(t instanceof tt){let r=t;return new tt(r.kind,e,r.mapper,r.namespace,r.tag,r.attributes,r.children,r.keyed_children,r.self_closing,r.void)}else if(t instanceof _t){let r=t;return new _t(r.kind,e,r.mapper,r.content)}else{let r=t;return new Kr(r.kind,e,r.mapper,r.namespace,r.tag,r.attributes,r.inner_html)}}var xf=1;function ei(e,t,r,n,i,s,l,o,u){return new tt(xf,e,t,r,n,us(i),s,l,o,u||hf(n,r))}var wf=2;function Po(e,t,r){return new _t(wf,e,t,r)}var bf=3;function Lo(e,t,r,n,i,s){return new Kr(bf,e,t,r,n,us(i),s)}function No(e,t){return Ye(t,e,(r,n)=>{let s=ds(n);return(l=>ot(r,l))(s)})}function ds(e){if(e instanceof Ct){let t=e.children;return No(yr(),t)}else if(e instanceof tt)if(e.self_closing){let r=e.key,n=e.namespace,i=e.tag,s=e.attributes,l="<"+i,o=Qr(r,n,s),a=ot(l,o);return xe(a,"/>")}else if(e.void){let n=e.key,i=e.namespace,s=e.tag,l=e.attributes,o="<"+s,u=Qr(n,i,l),f=ot(o,u);return xe(f,">")}else{let n=e.key,i=e.namespace,s=e.tag,l=e.attributes,o=e.children,u="<"+s,a=Qr(n,i,l),p=ot(u,a),m=xe(p,">"),b=No(m,o);return xe(b,"</"+s+">")}else if(e instanceof _t){let t=e.content;return t===""?yr():Jr(t)}else{let t=e.key,r=e.namespace,n=e.tag,i=e.attributes,s=e.inner_html,l="<"+n,o=Qr(t,r,i),a=ot(l,o),f=xe(a,">"),p=xe(f,s);return xe(p,"</"+n+">")}}function _s(e){let r=ds(e);return r}function B(e,t,r){return ei("",Me,"",e,t,r,hr(),!1,!1)}function Do(e){return Po("",Me,e)}function $s(e,t,r,n){return Lo("",Me,e,t,r,n)}function Fo(e){return _s(e)}function ms(e){let t=_s((()=>{if(e instanceof tt){let r=e.tag;return r==="html"?e:r==="head"?B("html",c([]),c([e])):r==="body"?B("html",c([]),c([e])):B("html",c([]),c([B("body",c([]),c([e]))]))}else return B("html",c([]),c([B("body",c([]),c([e]))]))})());return(r=>on(`<!doctype html>
`,r))(t)}function Ot(e){return{statusCode:e.status_code,headers:Object.fromEntries(e.headers.entries()),cookies:e.cookies.toArray(),body:e.body,isBase64Encoded:e.is_base64_encoded}}import*as Wo from"node:fs";function Xr(e){console.log(e)}function Nt(e){console.error(e)}function hs(e){return Wo.readFileSync(e,{encoding:"base64"})}var ws=class extends d{constructor(t,r,n,i,s,l,o,u,a){super(),this.version=t,this.raw_path=r,this.raw_query_string=n,this.cookies=i,this.headers=s,this.query_string_parameters=l,this.request_context=o,this.body=u,this.is_base64_encoded=a}},bs=class extends d{constructor(t,r,n,i,s,l,o,u){super(),this.account_id=t,this.api_id=r,this.domain_name=n,this.domain_prefix=i,this.http=s,this.request_id=l,this.time=o,this.time_epoch=u}},gs=class extends d{constructor(t,r,n,i,s){super(),this.method=t,this.path=r,this.protocol=n,this.source_ip=i,this.user_agent=s}},en=class extends d{constructor(t,r,n,i,s){super(),this.status_code=t,this.headers=r,this.cookies=n,this.body=i,this.is_base64_encoded=s}};function kf(){return F("method",P,e=>F("path",P,t=>F("protocol",P,r=>F("sourceIp",P,n=>F("userAgent",P,i=>pn(new gs(e,t,r,n,i)))))))}function vf(){return F("accountId",P,e=>F("apiId",P,t=>F("domainName",P,r=>F("domainPrefix",P,n=>F("http",kf(),i=>F("requestId",P,s=>F("time",P,l=>F("timeEpoch",ki,o=>pn(new bs(e,t,r,n,i,s,l,o))))))))))}function zf(){return F("version",P,e=>F("rawPath",P,t=>F("rawQueryString",P,r=>dn("cookies",c([]),ol(P),n=>F("headers",vi(P,P),i=>dn("queryStringParameters",ne(),vi(P,P),s=>F("requestContext",vf(),l=>dn("body","",P,o=>F("isBase64Encoded",ll,u=>pn(new ws(e,t,r,n,i,s,l,o,u)))))))))))}function Ro(e){let t=Ar(e,zf());return Ft(t,r=>(Nt("Decode error: "+Ve(r)),"Failed to decode Lambda event"))}function tn(e){return new en(200,sn(c([["Content-Type","text/html; charset=utf-8"]])),c([]),e,!1)}function Go(e,t){return new en(200,sn(c([["Content-Type",t]])),c([]),e,!0)}function Ho(e,t){let r=e;return new en(t,r.headers,r.cookies,r.body,r.is_base64_encoded)}function ys(e,t,r){return bn(e,n=>{if(n instanceof _){let i=n[0];return r(i)}else{let i=n[0];return Nt("Error: "+Ve(i)),fe(new w(t))}})}function Vo(e,t,r){let n,i=Wi(t);return n=Gt(i,l=>new w(r)),gn(c([e,n]))}function Zo(e,t){return B("html",e,t)}function Re(e){return Do(e)}function Jo(e,t){return B("head",e,t)}function Yo(e){return B("link",e,We)}function ks(e){return B("meta",e,We)}function Qo(e,t){return $s("","style",e,t)}function Ko(e,t){return B("title",e,c([Re(t)]))}function Xo(e,t){return B("body",e,t)}function eu(e,t){return B("header",e,t)}function tu(e,t){return B("h1",e,t)}function ru(e,t){return B("h2",e,t)}function rt(e,t){return B("div",e,t)}function vs(e,t){return B("p",e,t)}function nu(e,t){return B("a",e,t)}function zs(e,t){return B("span",e,t)}function Ss(e,t){return $s("","script",e,t)}function iu(e,t){return B("button",e,t)}function su(e,t){return B("form",e,t)}function Es(e){return B("input",e,We)}function As(e,t){return B("details",e,t)}function js(e,t){return B("summary",e,t)}function jf(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof x)return[i,E(s)];{let l=n.tail,o=n.head[0],u=n.head[1],a=Io(o,u),f;o===""?f=i:f=Xn(i,o,a);let p=f,m=$(a,s);e=l,t=p,r=m}}}function qf(e){return jf(e,hr(),We)}function Tf(e,t,r){let n=qf(r),i=n[0],s=n[1];return ei("",Me,"",e,t,s,i,!1,!1)}function lu(e,t){return Tf("div",e,t)}function ou(e){return rt(c([ce("feed")]),c([ru(c([]),c([zs(c([]),c([Re(e.channel.title)])),rt(c([ce("divider")]),c([]))])),rt(c([ce("feed-items")]),K(e.channel.items,t=>{let r,n=t.description,i=Ge(n,"");r=ln(i,'"',"");let s=r;return As(c([ce("feed-item")]),c([js(c([ce("item-title")]),c([Re((()=>{let l=t.title;return Ge(l,"Untitled")})())])),vs(c([ce("item-description")]),c([Re(s),nu((()=>{let l=qe(t.link,o=>c([cs(o)]));return Ge(l,c([]))})(),c([Re("Read more")]))]))]))}))]))}function qs(e){return vs(c([mr("color","red")]),c([Re(e)]))}var uu="feed-inputs";function Cf(){return c([iu(c([H("onclick","addFeedInput()"),Kn("button"),mr("margin-left","0.5em")]),c([Re("Add Feed")])),Ss(c([]),`
    function addFeedInput() {
      const form = document.getElementById('`+uu+`');
      if (form) {
        const input = document.createElement('input');
        input.name = 'feed-url[]';
        form.appendChild(input);
      }
    }
    `)])}function Of(e){return As(c([ce("sources")]),c([js(c([mr("font-weight","bold")]),c([Re("Sources")])),su(c([To("GET"),qo("/")]),$(rt(c([So(uu)]),K(e,t=>Es(c([as("feed-url[]"),fs(t)])))),$(Es(c([Kn("submit"),fs("Get feeds")])),Cf())))]))}function Ts(e,t){return Zo(c([]),c([Jo(c([]),c([ks(c([Co("UTF-8")])),ks(c([as("viewport"),Bo("width=device-width, initial-scale=1.0")])),Yo(c([Eo("icon"),Kn("image/x-icon"),cs("/favicon.ico")])),Ko(c([]),"RSS Reader"),Ss(c([Ao("https://cdn.jsdelivr.net/npm/htmx.org@2.0.6/dist/htmx.min.js"),jo("anonymous")]),""),Qo(c([]),`
body {
  background: antiquewhite;
  font-family: "Georgia", serif;
  margin: 0;
}

.loader {
    width: 24px;
    height: 24px;
    border: 3px solid #000;
    border-bottom-color: transparent;
    border-radius: 50%;
    display: inline-block;
    box-sizing: border-box;
    animation: rotation 1s linear infinite;
    margin: 1em;
}

@keyframes rotation {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(360deg);
    }
}

.feeds {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(max(300px, 30%), 1fr));
  margin-block: 1em;
  row-gap: 2em;
}

.feed {
  padding: 1em 2em;
  border-right: 1px solid #aaa6;
}

.feed h2 {
  text-transform: uppercase;
  display: flex;
  align-items: end;
  gap: 0.5em;
  margin-top: 0;
  margin-bottom: 1.25em;
}

.feed-items {
  display: flex;
  flex-direction: column;
  gap: 1.5em;
  max-height: 500px;
  overflow-y: auto;
}

.feed-items .feed-item:nth-child(even) {
  align-self: flex-end;
}
.feed-items .feed-item:nth-child(odd) {
  align-self: flex-start;
}
.feed-items .feed-item {
  width: 90%;
}

.feed-items .feed-item:first-of-type .item-title {
  font-size: 1.2em;
  width: 100%;
}

.item-description {
  font-size: smaller;
  opacity: 0.7;
  padding-left: 1em;
}

header {
  display: flex;
  align-items: baseline;
  gap: 1em;
  margin: 2em;
}

header h1 {
  margin: 0;
}

.divider {
  border-bottom: 1px solid #aaa;
  flex-grow: 1;
}

summary.item-title {
  font-size: 0.9em;
  padding-left: 1em;
  border-left: 4px solid coral;
}

.sources {
  margin-inline: 4em;
  padding: 0.5em 1em;
  border-block: 1px solid #0002;
}
@media (max-width: 600px) {
  .sources {
    margin-inline: 1em;
  }
}

.sources form {
  margin: 1em 0 0.5em;
}

#feed-inputs {
  display:flex;
  flex-wrap: wrap;
  gap: 0.25em 0.5em;
  margin-bottom: 0.5em;
}

#feed-inputs input {
  padding: 0.25em 1em 0.25em 0.5em;
  min-width: 200px;
  border-width: 0;
  border-left: 4px solid coral;
  background: floralwhite;
  text-overflow: ellipsis;
}

.sources form input[type="submit"], .sources button {
  border: 0;
  border-radius: 0.5em;
  background: coral;
  cursor: pointer;
  box-shadow: 0 2px 3px #0006;
  padding: 0.2em 0.5em;
  font-size: 14px;
}
`)])),Xo(c([]),c([eu(c([]),c([rt(c([ce("divider")]),c([])),tu(c([mr("text-align","center")]),c([Re("RSS Reader")])),rt(c([ce("divider")]),c([]))])),rt(c([mr("margin-inline","1em")]),K(t,r=>qs(r))),Of(e),lu(c([ce("feeds")]),K(e,r=>[r,rt(c([H("hx-get","/items?feed-url="+r),H("hx-trigger","load"),H("hx-target","this")]),c([zs(c([ce("loader")]),c([]))]))]))]))]))}function If(e){let t=ql(e);if(t instanceof _){let r=t[0];return Xr("Fetching feed from "+e),ys(Il(r),"Error fetching URL: "+e,n=>ys(Gi(n),"Error reading response body from URL: "+e,i=>fe(xo(i.body))))}else return fe(new w("Invalid URL: "+e))}function zx(e){let t=hs("./favicon.ico");Xr("Received event: "+Ve(e));let r=Ro(e),n;if(r instanceof _){let s=r[0],l=s.request_context.http.path;if(l==="/"){let o,u=s.query_string_parameters,a=Ie(u,"feed-url[]"),f=ct(a,""),p=Sr(f,",");o=Tr(p,q=>Dt(q)!=="");let b=Ts(o,c([])),g=ms(b),z=tn(g),k=Ot(z);n=fe(k)}else if(l==="/items"){let o,u=s.query_string_parameters,a=Ie(u,"feed-url");o=ct(a,"");let f=o;n=Gt((()=>{let p=If(f);return Vo(p,3e3,"Timeout fetching URL: "+f)})(),p=>{let m;if(p instanceof _){let k=p[0];m=ou(k)}else{let k=p[0];m=qs(k)}let g=Fo(m),z=tn(g);return Ot(z)})}else if(l==="/favicon.ico"){let o=Go(t,"image/x-icon"),u=Ot(o);n=fe(u)}else{let o=tn("Not found"),u=Ho(o,404),a=Ot(u);n=fe(a)}}else{let s=r[0];Nt(s);let l=Ts(c([]),c([s])),o=ms(l),u=tn(o),a=Ot(u);n=fe(a)}let i=n;return Tl(i,s=>Xr("Returning response: "+Ve(s))),i}export{zx as handler};
